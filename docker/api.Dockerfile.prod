FROM node:12

RUN mkdir -p /do-dydns/api

# install the api dependencies
WORKDIR /do-dydns/api
COPY package.json package.json
RUN npm install

# expose the ports
EXPOSE $PORT

# copy the application
COPY . .

# compile
RUN npm run compile

RUN rm -fr *.db

CMD ["node", "out/index.js"]
